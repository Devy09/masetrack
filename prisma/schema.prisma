generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          Int      @id @default(autoincrement())
  name        String
  role        String
  email       String   @unique
  status      String
  batch       String
  password    String
  image       String?
  phoneNumber String?
  address     String?
  
  // Relations
  submissions  CertificateSubmission[]
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Removed legacy Certificate model. Use CertificateSubmission + CertificateFile.

model CertificateSubmission {
  id          Int               @id @default(autoincrement())
  title       CertificateTitle
  semester    Semester          @default(FIRST)
  description String?
  status      String            @default("pending")
  isActive    Boolean           @default(true)
  userId      Int
  user        User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  files       CertificateFile[]
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
}

model CertificateFile {
  id            Int                    @id @default(autoincrement())
  submissionId  Int
  submission    CertificateSubmission  @relation(fields: [submissionId], references: [id], onDelete: Cascade)
  fileName      String
  fileUrl       String
  fileSize      Int
  fileType      String
  createdAt     DateTime               @default(now())
}

enum CertificateTitle {
  ENROLLMENT
  GRADES
}

enum Semester {
  FIRST
  SECOND
}